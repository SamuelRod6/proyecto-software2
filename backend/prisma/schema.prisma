generator client {
  provider = "prisma-client-go"
  output   = "./db"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id_usuario    Int      @id @default(autoincrement())
  nombre        String   @unique
  email         String   @unique
  password_hash String
  createdAt     DateTime @default(now())
  UsuarioRoles  UsuarioRoles[]
}

model Roles {
  id_rol      Int       @id @default(autoincrement())
  nombre_rol  String    @unique
  descripcion String
  createdAt   DateTime  @default(now())
  UsuarioRoles UsuarioRoles[]
  RolePermisos RolePermisos[]
}

model Permisos {
  id_permiso    Int      @id @default(autoincrement())
  nombre_permiso String  @unique
  createdAt     DateTime @default(now())
  RolePermisos RolePermisos[]
}

model RolePermisos {
  id_rol     Int
  id_permiso Int
  rol        Roles       @relation(fields: [id_rol], references: [id_rol])
  permiso    Permisos @relation(fields: [id_permiso], references: [id_permiso])

  @@id([id_rol, id_permiso])
}

model UsuarioRoles {
  id_usuario Int
  id_rol     Int
  usuario    Usuario @relation(fields: [id_usuario], references: [id_usuario])
  rol        Roles   @relation(fields: [id_rol], references: [id_rol])

  @@id([id_usuario, id_rol])
}

model Evento {
  id_evento                  Int      @id @default(autoincrement())
  nombre                     String   @unique
  fecha_inicio               DateTime
  fecha_fin                  DateTime
  fecha_cierre_inscripcion   DateTime
  inscripciones_abiertas_manual Boolean @default(true)
  ubicacion                  String
  createdAt                  DateTime @default(now())
}
